<html>
<head>

  <link rel="stylesheet" href="css/chessboard-0.3.0.min.css" />
  <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script src="js/chessboard-0.3.0.min.js"></script>
  <script src="js/chess.min.js"></script>
  <script src="js/t.js"></script>

  <script src="http://d3js.org/d3.v3.min.js"></script>
  <script>

  var render = function(json, clear) {
    if (clear === true) {
      $('svg').remove();
    }
    var svg = d3.select("body").append("svg")
        .attr("width", width)
        .attr("height", height)
      .append("g")
        .attr("transform", "translate(40,0)");

    var nodes = tree.nodes(json),
        links = tree.links(nodes);

    var link = svg.selectAll("path.link")
        .data(links)
      .enter().append("path")
        .attr("class", "link")
        .attr("d", diagonal);

    var node = svg.selectAll("g.node")
        .data(nodes)
      .enter().append("g")
        .attr("class", "node")
        .attr("transform", function(d) { return "translate(" + d.y + "," + d.x + ")"; })
        .on("click", click);

    node.append("circle")
        .attr("r", 4.5);

    node.append("text")
        .attr("dx", function(d) { return d.children ? -8 : 8; })
        .attr("dy", 3)
        .attr("text-anchor", function(d) { return d.children ? "end" : "start"; })
        .text(function(d) { return d.id; });

    d3.select(self.frameElement).style("height", height + "px");
  }

  var width = 540,
      height = 100;

  var tree = d3.layout.tree()
      .size([height, width - 160]);

  var diagonal = d3.svg.diagonal()
      .projection(function(d) { return [d.y, d.x]; });

  </script>

  <style>
    .node circle {
      fill: #fff;
      stroke: steelblue;
      stroke-width: 1.5px;
    }

    .node {
      font: 10px sans-serif;
    }

    .link {
      fill: none;
      stroke: #ccc;
      stroke-width: 1.5px;
    }
  </style>

</head>
<body>

  <div id="board" style="width: 400px; margin-left: 30px; float:left;"></div>
  <div>
    <p>Status: <span id="status"></span></p>
    <p>FEN: <span id="fen"></span></p>
    <p>PGN: <span id="pgn"></span></p>
    <p>depth: <span id="depth"></span></p>
    <p><button id="replay">Replay</button></p>
    <p><label for="record"><input type="checkbox" id="record"> Record</label></p>
  </div>

  <div style="width: 400px; padding: 25px; margin: 0px;">
    <input type="range" min="0" max="" step="1" id="slider" value="0" style="width: 100%">
  </div>
  <script src="js/app.js"></script>
</body>
</html>
